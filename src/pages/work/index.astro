---
import { LandingPage, PageHero, VStack, PrimaryButton, DownloadIcon } from '@/lib/ui';

import { workPageData } from '../../lib/domain/work/_/workPage.data';
import { WorkPage } from '../../lib/domain/work/_/WorkPage';
import { WorkPageSection } from '../../lib/domain/work/_/WorkPageSection';
import WorkJobCard from '@/lib/domain/work/job/WorkJobCard.astro';
import WorkProjectCard from '@/lib/domain/work/project/WorkProjectCard.astro';
import { workSkillsById } from '@/lib/domain/work/skill/workSkillsById.data';
import WorkSkillCard from '@/lib/domain/work/skill/WorkSkillCard.astro';
import WorkSkillTagCard from '@/lib/domain/work/skillTag/WorkSkillTagCard.astro';

const { companies, projects, expertise, professionalProfile } = workPageData.sections;
---

<WorkPage title={workPageData.title}>
  <LandingPage.Body
    backgroundColor="bg-gray-100"
    class={`
      flex
      flex-col
      min-h-screen
    `}
  >
    <PageHero
      data-testid="work-hero"
      title={workPageData.title}
      subtitle={workPageData.subtitle}
      class="w-full"
    />

    <LandingPage.Section
      class={`
        w-full
        py-12
        sm:py-16
        md:py-20
        space-y-32
      `}
    >
      <VStack class="gap-12">
        <WorkPageSection.Container data-testid="profile-section">
          <WorkPageSection.Title>{professionalProfile.title}</WorkPageSection.Title>
          <p class="text-gray-600 mb-6">{professionalProfile.description}</p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div
              class="bg-white p-8 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-100"
              data-testid="resume-card"
            >
              <div class="flex items-center gap-4 mb-4">
                <div class="w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6 text-indigo-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    ></path>
                  </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800">
                  {professionalProfile.sections.resume.title}
                </h3>
              </div>
              <p class="text-gray-600 mb-6">{professionalProfile.sections.resume.description}</p>
              <PrimaryButton class="w-full">
                <a
                  href="/files/andrew-holbrook-resume.pdf"
                  download
                  class="block w-full text-center flex items-center justify-center gap-2"
                >
                  <DownloadIcon size={20} />
                  Download Resume
                </a>
              </PrimaryButton>
            </div>

            <div
              class="bg-white p-8 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-100"
            >
              <div class="flex items-center gap-4 mb-4">
                <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6 text-blue-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    ></path>
                  </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800">Professional Highlights</h3>
              </div>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <svg
                    class="h-5 w-5 text-green-500 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"></path>
                  </svg>
                  <span class="text-gray-600">10+ years of software development experience</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg
                    class="h-5 w-5 text-green-500 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"></path>
                  </svg>
                  <span class="text-gray-600"
                    >Expert in full-stack development and system architecture</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <svg
                    class="h-5 w-5 text-green-500 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"></path>
                  </svg>
                  <span class="text-gray-600"
                    >Proven track record of leading successful projects</span
                  >
                </li>
              </ul>
            </div>
          </div>
        </WorkPageSection.Container>

        <WorkPageSection.Container data-testid="companies-section">
          <WorkPageSection.Title>{companies.title}</WorkPageSection.Title>
          <p class="text-gray-600 mb-6">{companies.description}</p>
          {workPageData.candidate.jobs.map(job => <WorkJobCard {...job} />)}
        </WorkPageSection.Container>

        <WorkPageSection.Container data-testid="projects-section">
          <WorkPageSection.Title>{projects.title}</WorkPageSection.Title>
          <p class="text-gray-600 mb-6">{projects.description}</p>
          <WorkPageSection.Grid>
            {workPageData.candidate.projects.map(project => <WorkProjectCard {...project} />)}
          </WorkPageSection.Grid>
        </WorkPageSection.Container>

        <WorkPageSection.Container data-testid="expertise-section">
          <WorkPageSection.Title>{expertise.title}</WorkPageSection.Title>
          <p class="text-gray-600 mb-6">{expertise.description}</p>

          <div class="space-y-12">
            <div data-testid="tech-highlights">
              <h3 class="text-xl font-medium mb-4">{expertise.sections.technologies.title}</h3>
              <div class="flex flex-wrap gap-3 justify-center">
                {
                  expertise.sections.technologies.highlights.map(skillId => (
                    <div
                      data-testid="tech-highlight"
                      class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full shadow-sm border border-indigo-100 text-indigo-700 font-medium hover:shadow-md hover:from-blue-100 hover:to-indigo-100 transition-all duration-200 text-sm"
                    >
                      {workSkillsById[skillId].name}
                    </div>
                  ))
                }
              </div>
            </div>

            <div data-testid="proficiencies-section">
              <h3 class="text-xl font-medium mb-4">{expertise.sections.proficiencies.title}</h3>
              <WorkPageSection.Grid>
                {workPageData.candidate.proficiencies.map(skill => <WorkSkillCard {...skill} />)}
              </WorkPageSection.Grid>
            </div>

            <div data-testid="skills-section">
              <h3 class="text-xl font-medium mb-4">{expertise.sections.skills.title}</h3>
              <WorkPageSection.Grid>
                {
                  workPageData.candidate.skillTags.map(category => (
                    <WorkSkillTagCard
                      category={category.category}
                      skills={workPageData.candidate.skills}
                      skillIds={category.skillIds}
                      icon={category.icon}
                    />
                  ))
                }
              </WorkPageSection.Grid>
            </div>
          </div>
        </WorkPageSection.Container>
      </VStack>
    </LandingPage.Section>
    <LandingPage.Footer />
  </LandingPage.Body>
</WorkPage>
